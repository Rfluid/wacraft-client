<a
  class="flex w-full items-center border-b border-gray-200 px-4 py-4 dark:border-gray-700"
    [ngClass]="{
        'bg-gray-200 dark:bg-gray-600': isSelected,
        'hover:bg-gray-300 dark:hover:bg-gray-700': !isSelected,
    }"
  [routerLink]="[]"
  [queryParams]="queryParams"
  queryParamsHandling="replace"
  #rootAnchor
  >
  <!-- Show image if profilePictureSrcInput is provided -->
  <div>
    @if (messagingProductContact.contact.photo_path) {
      <img
        [src]="messagingProductContact.contact.photo_path"
        alt="Profile Picture"
        class="h-12 w-12 rounded-full"
        />
    }

    <!-- Show Font Awesome icon if profilePictureSrcInput is not provided -->
    @if (!messagingProductContact.contact.photo_path) {
      <i
        class="fas fa-user-circle text-5xl text-gray-500 dark:text-gray-400"
      ></i>
    }
  </div>

  <div class="ml-3 flex-1 truncate">
    <div class="flex items-center justify-between">
      <span
        class="truncate font-medium text-gray-800 dark:text-gray-200"
                [textContent]="
                    messagingProductContact.contact.name ||
                    messagingProductContact.product_details.phone_number
                "
      ></span>
      <span
        class="text-sm text-gray-500 dark:text-gray-400"
        [textContent]="date | date: 'short'"
      ></span>
    </div>
    <div class="flex w-full items-center justify-between gap-2">
      <!-- Ícone de status + texto da mensagem -->
      <div class="flex min-w-0 items-center">
        @if (lastMessage.statuses && lastMessage.statuses.length) {
          <div
            class="mr-1 flex flex-shrink-0 items-center justify-center brightness-50 dark:brightness-100"
            >
            @if (lastMessage.statuses[0].product_data.status === 'sent') {
              <img
                width="10px"
                src="assets/icons/flaticon/check-mark.png"
                alt="Message sent"
                />
            }
            @if (lastMessage.statuses[0].product_data.status === 'delivered') {
              <img
                width="15px"
                src="assets/icons/flaticon/double-check-mark.png"
                alt="Message delivered"
                />
            }
            @if (lastMessage.statuses[0].product_data.status === 'read') {
              <img
                width="15px"
                src="assets/icons/flaticon/double-green-check-mark.png"
                alt="Message read"
                />
            }
            @if (lastMessage.statuses[0].product_data.status === 'failed') {
              <i
                class="fa fa-exclamation-circle text-xm text-red-600"
              ></i>
            }
          </div>
        }

        <!-- Preview da mensagem -->
        <app-message-content-preview
          [message]="lastMessage | messageData"
          class="truncate text-left"
        ></app-message-content-preview>
      </div>

      <!-- Contador à direita -->
      @if (unread > 0) {
        <span
          class="flex h-5 min-w-[1.25rem] flex-shrink-0 items-center justify-center rounded-full bg-blue-500 px-1 text-xs font-semibold text-white dark:text-gray-300"
          >
          {{ unread }}
        </span>
      }
    </div>
  </div>
</a>
