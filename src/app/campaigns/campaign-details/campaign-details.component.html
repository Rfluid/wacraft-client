<div class="scrollable mx-auto h-full overflow-y-scroll p-6 dark:bg-gray-900 dark:text-gray-100">
    <h3 class="mb-4 text-xl font-semibold text-gray-600 dark:text-gray-200" i18n>
        Campaign settings
    </h3>

    @if (campaign) {
        <div class="mb-6 grid grid-cols-12 gap-4 rounded-lg bg-gray-100 p-6 dark:bg-gray-700">
            <div
                class=""
                [ngClass]="{
                    'relative col-span-12': true,
                    'sm:col-span-12': !campaignId,
                    'sm:col-span-6': campaignId,
                }"
            >
                <label class="mb-2 block text-sm font-medium" i18n for="campaign-name">Name</label>
                <div class="relative">
                    <input
                        type="url"
                        id="campaign-name"
                        [(ngModel)]="campaign.name"
                        [disabled]="!isEditing"
                        class="w-full rounded bg-gray-200 p-2 outline-none dark:bg-gray-600 dark:text-white"
                    />
                </div>
            </div>
            @if (campaignId) {
                <div class="relative col-span-12 sm:col-span-6">
                    <label class="mb-2 block text-sm font-medium" for="campaign-id">ID</label>
                    <div class="relative">
                        <input
                            id="campaign-id"
                            [(ngModel)]="campaign.id"
                            [disabled]="!isEditing"
                            class="w-full rounded bg-gray-200 p-2 pr-10 outline-none dark:bg-gray-600 dark:text-white"
                        />
                        <button
                            mat-icon-button
                            class="absolute right-2 top-2 text-gray-500 transition hover:text-gray-700 dark:text-gray-400 dark:hover:text-white"
                            (click)="copyToClipboard(campaign.id)"
                            matTooltip="Copy campaign ID"
                        >
                            <mat-icon class="material-icons-outlined">copy</mat-icon>
                        </button>
                    </div>
                </div>
            }
            @if (campaignId) {
                <div class="relative col-span-12 sm:col-span-4">
                    <p class="mb-2 block text-sm font-medium" i18n>Total messages</p>
                    <div class="relative">
                        <div
                            class="w-full rounded bg-gray-200 p-2 outline-none dark:bg-gray-600 dark:text-white"
                        >
                            {{ totalMessages }}
                        </div>
                    </div>
                </div>
            }
            @if (campaignId) {
                <div class="relative col-span-12 sm:col-span-4">
                    <p class="mb-2 block text-sm font-medium" i18n>Messages sent</p>
                    <div class="relative">
                        <div
                            class="w-full rounded bg-gray-200 p-2 outline-none dark:bg-gray-600 dark:text-white"
                        >
                            {{ messagesSent }}
                        </div>
                    </div>
                </div>
            }
            @if (campaignId) {
                <div class="relative col-span-12 sm:col-span-4">
                    <p class="mb-2 block text-sm font-medium" i18n>Unsent messages</p>
                    <div class="relative">
                        <div
                            class="w-full rounded bg-gray-200 p-2 pr-10 outline-none dark:bg-gray-600 dark:text-white"
                        >
                            {{ unsentMessages }}
                        </div>
                    </div>
                </div>
            }
            <!-- Button section -->
            @if (!isEditing) {
                <div class="col-span-6 flex flex-col items-center">
                    <button
                        (click)="toggleEdit()"
                        class="w-full rounded bg-green-600 py-2 font-bold text-white hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600"
                        i18n
                    >
                        Edit
                    </button>
                </div>
            }
            @if (!isEditing && campaignId) {
                <div class="col-span-6 flex flex-col items-center">
                    <button
                        (click)="delete()"
                        class="w-full rounded bg-red-600 py-2 font-bold text-white hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600"
                        i18n
                    >
                        Delete
                    </button>
                </div>
            }
            @if (isEditing) {
                <div class="col-span-6 flex flex-col items-center">
                    <button
                        (click)="cancelEdit()"
                        class="w-full rounded bg-red-600 py-2 font-bold text-white hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600"
                        i18n
                    >
                        Cancel
                    </button>
                </div>
            }
            @if (isEditing) {
                <div class="col-span-6 flex flex-col items-center">
                    <button
                        (click)="saveChanges()"
                        class="w-full rounded bg-blue-600 py-2 font-bold text-white hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600"
                    >
                        Save
                    </button>
                </div>
            }
        </div>
    }

    @if (campaignId) {
        <div class="text-gray-600 dark:text-gray-200">
            <h3 class="mb-2 text-lg font-semibold" i18n>Send campaign</h3>
            <app-send-campaign
                [total]="unsentMessages"
                (done)="loadCampaignDataAndStatuses()"
                class="rounded-lg"
            ></app-send-campaign>
            <h3 class="mb-2 text-lg font-semibold" i18n>Add messages to campaign</h3>
            <app-campaign-message-builder
                class="rounded-lg"
                (messagesAdded)="loadMessageCount()"
            ></app-campaign-message-builder>
            <h3 class="mb-2 text-lg font-semibold" i18n>Messages</h3>
            <app-campaign-messages class="max-w-full rounded-lg"></app-campaign-messages>
        </div>
    }
</div>
