<div>
    <!-- Location Preview -->
    <div class="mb-2">
        <input
            type="text"
            placeholder="Search for places..."
            #searchInput
            [ngClass]="{
                'mb-1 w-full rounded bg-gray-200 p-2 outline-none dark:bg-gray-600 dark:text-white': true,
                hidden: locationType !== 'map',
            }"
        />

        @if (options) {
            <google-map
                [options]="options"
                height="250px"
                width="100%"
                (mapClick)="onMapClick($event)"
            >
                @if (markerPosition) {
                    <map-marker
                        [position]="markerPosition"
                        [options]="{ draggable: isMarkerDraggable }"
                        (mapDragend)="onMarkerDragEnd($event)"
                    ></map-marker>
                }
            </google-map>
        }
    </div>

    <!-- Type selection and Name/Address fields -->
    <div class="grid grid-cols-12 gap-2">
        <select
            id="location-type"
            class="col-span-4 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 outline-none focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"
            [(ngModel)]="locationType"
            (ngModelChange)="onLocationTypeChange()"
            name="locationType"
        >
            <option value="self" i18n>Self</option>
            <option value="map" i18n>Map</option>
        </select>

        <textarea
            class="col-span-8 min-h-10 w-full resize-none rounded-lg bg-gray-600 px-3 py-2 text-white outline-none"
            placeholder="Name (optional)"
            i18n-placeholder
            rows="1"
            [(ngModel)]="name"
            (input)="adjustHeight(nameArea)"
            name="nameArea"
            #nameArea
        ></textarea>

        <textarea
            class="col-span-12 min-h-10 w-full resize-none rounded-lg bg-gray-300 px-3 py-2 outline-none dark:bg-gray-600 dark:text-white"
            placeholder="Address (optional)"
            i18n-placeholder
            rows="1"
            [(ngModel)]="address"
            (input)="adjustHeight(addressArea)"
            name="addressArea"
            #addressArea
        ></textarea>
    </div>

    @if (error) {
        <div class="mt-1 text-sm text-red-500">
            {{ error }}
        </div>
    }
</div>
